<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>simrail.alekswilc.dev</title>
    <meta name="description" content="Simrail Utils">
    <meta property="og:title" content="simrail.alekswilc.dev">
    <meta property="og:url" content="https://simrail.alekswilc.dev/search?q=<%=q%>">
    <meta property="og:description" content="Simrail Utils">
    <meta property="og:type" content="website">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/open-fonts@1.1.1/fonts/inter.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">

    <style>
        p {
            margin: 1%;
        }
    </style>

</head>

<body>
    <%- include('../_modules/header.ejs', { section: 'stations' }) %>

    <h2>Tablica godzin</h2>
    <div class="container">
        <input type="text" id="search" value="<%=q%>">
        <button onclick="search()">Filtruj</button>
        <button onclick="clearSearch()">Wyczyść</button>

        <p>Użyj przecinka, aby wyszukać wiele wartości: pl2,Łazy</p>
    </div>
    <ul>
        <% records.forEach(record=> { %>
            <li>
                <details>
                    <summary>[<span style="color:lightskyblue">
                            <%= record.server.toUpperCase() %>
                        </span>] <span style="color: lightskyblue">
                            <%= record.stationName %>
                        </span> - <span style="color:hotpink">
                            <%= record.userUsername %>
                        </span>- <span style="color:lightseagreen">
                            <%= record.joinedDate ? msToTime(record.leftDate - record.joinedDate) : '--' %>
                        </span>
                        <p style="margin-bottom: 0; opacity: 0.5;">
                            <%= dayjs(record.leftDate).format('HH:mm DD/MM/YYYY') %>
                        </p>
                    </summary>
                    <p>Data dołączenia: <%= record.joinedDate ? dayjs(record.joinedDate).format('HH:mm DD/MM/YYYY')
                            : '--:-- --/--/--' %> (<%= record.joinedDate ? dayjs(record.joinedDate).fromNow() : '--' %>)
                    </p>
                    <p>Data wyjścia: <%= dayjs(record.leftDate).format('HH:mm DD/MM/YYYY') %> (<%=
                                dayjs(record.leftDate).fromNow() %>)</p>
                    <p>Spędzony czas: <%= record.joinedDate ? msToTime(record.leftDate - record.joinedDate) : '--' %>
                    </p>

                    <a href="/details/<%= record.id %>">
                        <button>Więcej</button>
                    </a>
                </details>
            </li>
            <% }) %>
    </ul>

    <% if (!records.length) { %>
        <h4>Nie znaleziono wyników dla twojego zapytania.</h4>
    <% } %>


    <script>
        function search() {
            location.href = '/stations/leaderboard?q=' + document.getElementById('search').value
        }

        function clearSearch() {
            location.href = '/stations/leaderboard'
        }

        document.getElementById('search').addEventListener("keyup", (event) => {
            if (event.key === "Enter")
                search();

        });
    </script>
    <hr>
    <%- include('../_modules/footer.ejs', { thanks: false }) %>
</body>

</html>